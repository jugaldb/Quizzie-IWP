{"ast":null,"code":"var _jsxFileName = \"/home/jugaldb/Desktop/projects/IWP/src/pages/Welcome.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Container, Grid, Hidden } from '@material-ui/core';\nimport './Welcome.css';\nimport PlayMenuBar from '../components/PlayMenuBar';\nimport InfoContext from \"../context/InfoContext\";\nimport axios from \"axios\";\nimport Loading from \"./Loading\";\nimport { Redirect } from 'react-router';\nimport * as qs from \"query-string\";\n\nfunction Welcome(props) {\n  const [loading, setLoading] = useState(true);\n  const [dashRedirect, setDashRedirect] = useState(false);\n  const {\n    setLoggedIn,\n    setAuthToken,\n    changeName\n  } = useContext(InfoContext);\n\n  const getQueryParams = () => {\n    const query = window.location.search.substring(1);\n    const vars = query.split(\"&\");\n    let name = null;\n    let token = null;\n    vars.map(det => {\n      const sp = det.split(\"=\");\n\n      if (sp[0] === \"name\") {\n        name = decodeURIComponent(sp[1]);\n      } else if (sp[0] === \"token\") {\n        token = sp[1];\n      }\n    });\n\n    if (name !== null && token !== null) {\n      setAuthToken(token);\n      changeName(name);\n      localStorage.setItem(\"authToken\", token);\n      localStorage.setItem(\"name\", name);\n      localStorage.setItem(\"userLoggedIn\", true);\n      setLoggedIn(true);\n      setDashRedirect(true);\n      return true;\n    }\n\n    return false;\n  };\n\n  useEffect(() => {\n    if (!getQueryParams()) {\n      const token = localStorage.getItem('authToken');\n\n      if (token === null) {\n        setLoggedIn(false);\n        setLoading(false);\n      } else {\n        setLoggedIn(true);\n        setDashRedirect(true);\n        setLoading(false);\n      }\n    }\n  }, []);\n\n  if (dashRedirect) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 4\n      }\n    });\n  } else {\n    return loading ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 14\n      }\n    }) : /*#__PURE__*/React.createElement(Container, {\n      className: \"welcome-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"welcome-screen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 6,\n      className: \"heading-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"head.png\",\n      className: \"quiz-image\",\n      alt: \"Welcome to Quizzie\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(Hidden, {\n      smDown: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 6,\n      className: \"pin-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"quiz.png\",\n      className: \"pin-image\",\n      alt: \"User Representation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    })))), /*#__PURE__*/React.createElement(PlayMenuBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 6\n      }\n    })));\n  }\n}\n\nexport default Welcome;","map":{"version":3,"sources":["/home/jugaldb/Desktop/projects/IWP/src/pages/Welcome.js"],"names":["React","useContext","useEffect","useState","Container","Grid","Hidden","PlayMenuBar","InfoContext","axios","Loading","Redirect","qs","Welcome","props","loading","setLoading","dashRedirect","setDashRedirect","setLoggedIn","setAuthToken","changeName","getQueryParams","query","window","location","search","substring","vars","split","name","token","map","det","sp","decodeURIComponent","localStorage","setItem","getItem"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport {Container, Grid, Hidden} from '@material-ui/core';\r\nimport './Welcome.css';\r\nimport PlayMenuBar from '../components/PlayMenuBar';\r\nimport InfoContext from \"../context/InfoContext\";\r\nimport axios from \"axios\";\r\nimport Loading from \"./Loading\";\r\nimport { Redirect } from 'react-router';\r\nimport * as qs from \"query-string\";\r\n\r\nfunction Welcome(props) {\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [dashRedirect, setDashRedirect] = useState(false);\r\n\tconst { setLoggedIn, setAuthToken, changeName } = useContext(InfoContext);\r\n\r\n\tconst getQueryParams = () => {\r\n\t\tconst query = window.location.search.substring(1);\r\n\t\tconst vars = query.split(\"&\");\r\n\r\n\t\tlet name = null;\r\n\t\tlet token = null;\r\n\r\n\t\tvars.map(det => {\r\n\t\t\tconst sp = det.split(\"=\");\r\n\t\t\tif(sp[0] === \"name\") {\r\n\t\t\t\tname = decodeURIComponent(sp[1]);\r\n\t\t\t} else if(sp[0] === \"token\") {\r\n\t\t\t\ttoken = sp[1];\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif(name !== null && token !== null) {\r\n\t\t\tsetAuthToken(token);\r\n\t\t\tchangeName(name);\r\n\r\n\t\t\tlocalStorage.setItem(\"authToken\", token);\r\n\t\t\tlocalStorage.setItem(\"name\", name);\r\n\t\t\tlocalStorage.setItem(\"userLoggedIn\", true);\r\n\t\t\tsetLoggedIn(true);\r\n\r\n\t\t\tsetDashRedirect(true);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(!getQueryParams()) {\r\n\t\t\tconst token = localStorage.getItem('authToken');\r\n\t\t\tif(token === null) {\r\n\t\t\t\tsetLoggedIn(false);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t} else {\r\n\t\t\t\tsetLoggedIn(true);\r\n\t\t\t\tsetDashRedirect(true);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t}\r\n\t}, []);\r\n\r\n\tif(dashRedirect) {\r\n\t\treturn (\r\n\t\t\t<Redirect to=\"/dashboard\" />\r\n\t\t)\r\n\t} else {\r\n\t\treturn (\r\n\t\t\tloading ? <Loading />\r\n\t\t\t:\r\n\t\t\t<Container className=\"welcome-page\">\r\n\t\t\t\t<div className=\"welcome-screen\">\r\n\t\t\t\t\t<Grid container spacing={0}>\r\n\t\t\t\t\t\t<Grid item xs={12} md={6} className=\"heading-section\">\r\n\t\t\t\t\t\t\t<img src=\"head.png\" className=\"quiz-image\" alt=\"Welcome to Quizzie\"></img>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Hidden smDown>\r\n\t\t\t\t\t\t\t<Grid item xs={12} md={6} className=\"pin-section\">\r\n\t\t\t\t\t\t\t\t<img src=\"quiz.png\" className=\"pin-image\" alt=\"User Representation\"></img>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Hidden>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<PlayMenuBar />\r\n\t\t\t\t</div>\r\n\t\t\t</Container>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Welcome;"]},"metadata":{},"sourceType":"module"}